# 自定义群聊主动回复提示词

这是一个AstrBot的插件，用于在群聊场景下，当启用主动回复功能时允许用户自定义群聊主动回复提示词。AstrBot框架的群聊上下文感知中，主动回复提示词默认不可修改且为英文（易误导LLM使用英文进行回复），本插件可由用户自定义群聊主动回复提示词。

> 原主动回复提示词：Please react to it. Only output your response and do not output any other information.

## 功能特点

- 自动识别群聊中的主动回复场景
- 允许用户自定义替换默认的主动回复提示词
- 只在主动回复功能启用时生效，避免不必要的处理
- 保持对话上下文的连贯性和相关性

## 工作原理

插件通过AstrBot的事件系统，在每次向LLM发送请求前（`on_llm_request`事件）拦截请求，然后：

1. 检查是否是群聊消息
2. 检查是否启用了主动回复功能
3. 从最后一个user消息中搜索特定的英文提示词（"Please react to it..."）
4. 用用户在配置中设置的自定义提示词替换默认提示词

## 配置选项

插件提供以下配置选项，可在AstrBot的插件配置界面中修改：

| 配置项 | 类型 | 默认值 | 说明 |
|-------|------|-------|------|
| activate_reply_prompt | 字符串 | "请对其进行回应。仅输出你的回复，不得包含其他内容。" | 自定义的主动回复提示词，将替换默认的英文提示词 |

## 安装方法

- 在 AstrBot 的插件市场中`搜索本插件`直接安装
- 通过 Astrbot WebUI 的插件安装按钮从`链接`或`文件`安装

## 使用方法

1. 启用插件后，在插件配置中设置您想要的自定义主动回复提示词
2. 确保在群聊设置中启用了主动回复功能
3. 插件会自动工作，无需额外操作

## 调试信息

插件会在日志中记录以下信息：

- 插件初始化和卸载的状态
- 主动回复功能是否启用的检查结果
- 提示词替换的操作记录

## 版本历史

### v1.0.0
- 初始版本发布
- 支持在群聊主动回复场景下自定义提示词
- 自动检测主动回复功能是否启用

## 作者

[@zz6zz666](https://github.com/zz6zz666)

## 许可证

GNU Affero General Public License v3.0
